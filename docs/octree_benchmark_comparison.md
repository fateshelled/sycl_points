# Octree KNN ベンチマーク比較

以下の結果は、Octree の近傍候補管理方式について

1. **最大ヒープ方式（現行実装）**
2. **昇順配列挿入方式（Turn 11 の実装）**

を比較したものです。ベンチマークテスト `OctreeTest.BenchmarkOctreeAgainstKDTree` をウォームアップののち100回平均で計測し、点群構成は commit `b734b61` 時点のテスト実装に従います。

### 構築時間 (ms)

| ケース | ターゲット点数 | クエリ点数 | k | 最大ヒープ | 昇順配列挿入 |
| --- | --- | --- | --- | --- | --- |
| 1 | 10,000 | 1,000 | 1 | 1.885 | 2.349 |
| 1 | 10,000 | 1,000 | 10 | 1.633 | 2.067 |
| 1 | 10,000 | 1,000 | 20 | 1.606 | 2.425 |
| 1 | 10,000 | 1,000 | 30 | 2.047 | 3.675 |
| 2 | 50,000 | 5,000 | 1 | 8.099 | 12.046 |
| 2 | 50,000 | 5,000 | 10 | 8.029 | 11.799 |
| 2 | 50,000 | 5,000 | 20 | 8.419 | 11.079 |
| 2 | 50,000 | 5,000 | 30 | 8.060 | 10.938 |
| 3 | 100,000 | 10,000 | 1 | 15.114 | 17.812 |
| 3 | 100,000 | 10,000 | 10 | 17.462 | 20.074 |
| 3 | 100,000 | 10,000 | 20 | 14.828 | 25.088 |
| 3 | 100,000 | 10,000 | 30 | 15.201 | 20.258 |

### 探索時間 (ms)

| ケース | ターゲット点数 | クエリ点数 | k | 最大ヒープ | 昇順配列挿入 |
| --- | --- | --- | --- | --- | --- |
| 1 | 10,000 | 1,000 | 1 | 1.488 | 2.234 |
| 1 | 10,000 | 1,000 | 10 | 4.181 | 5.908 |
| 1 | 10,000 | 1,000 | 20 | 6.365 | 8.152 |
| 1 | 10,000 | 1,000 | 30 | 8.595 | 10.273 |
| 2 | 50,000 | 5,000 | 1 | 10.336 | 11.153 |
| 2 | 50,000 | 5,000 | 10 | 21.279 | 26.740 |
| 2 | 50,000 | 5,000 | 20 | 29.334 | 43.757 |
| 2 | 50,000 | 5,000 | 30 | 39.855 | 57.541 |
| 3 | 100,000 | 10,000 | 1 | 20.764 | 30.347 |
| 3 | 100,000 | 10,000 | 10 | 44.474 | 59.902 |
| 3 | 100,000 | 10,000 | 20 | 67.756 | 96.612 |
| 3 | 100,000 | 10,000 | 30 | 85.769 | 117.375 |

- 「昇順配列挿入」は Turn 11 で導入した挿入ソート方式の結果です。
- 現行実装は最大ヒープ方式であり、比較のため Turn 11 以前の測定値を再掲しています。
