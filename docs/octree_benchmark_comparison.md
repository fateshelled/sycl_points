# Octree KNN ベンチマーク比較

以下の結果は、Octree の近傍候補管理方式について

1. **最大ヒープ方式（現行実装）**
2. **昇順配列挿入方式（Turn 11 の実装）**

を比較したものです。ベンチマークテスト `OctreeTest.BenchmarkOctreeAgainstKDTree` をウォームアップののち100回平均で計測し、点群構成は commit `26a038a` 時点のテスト実装に従います。

### 構築時間 (ms)

| ケース | ターゲット点数 | クエリ点数 | k | 最大ヒープ | 昇順配列挿入 |
| --- | --- | --- | --- | --- | --- |
| 1 | 10,000 | 1,000 | 1 | 1.120 | 2.349 |
| 1 | 10,000 | 1,000 | 10 | 1.558 | 2.067 |
| 1 | 10,000 | 1,000 | 20 | 1.621 | 2.425 |
| 1 | 10,000 | 1,000 | 30 | 1.604 | 3.675 |
| 2 | 50,000 | 5,000 | 1 | 7.987 | 12.046 |
| 2 | 50,000 | 5,000 | 10 | 7.644 | 11.799 |
| 2 | 50,000 | 5,000 | 20 | 6.855 | 11.079 |
| 2 | 50,000 | 5,000 | 30 | 7.941 | 10.938 |
| 3 | 100,000 | 10,000 | 1 | 13.590 | 17.812 |
| 3 | 100,000 | 10,000 | 10 | 14.661 | 20.074 |
| 3 | 100,000 | 10,000 | 20 | 14.093 | 25.088 |
| 3 | 100,000 | 10,000 | 30 | 13.739 | 20.258 |

### 探索時間 (ms)

| ケース | ターゲット点数 | クエリ点数 | k | 最大ヒープ | 昇順配列挿入 |
| --- | --- | --- | --- | --- | --- |
| 1 | 10,000 | 1,000 | 1 | 1.568 | 2.234 |
| 1 | 10,000 | 1,000 | 10 | 3.494 | 5.908 |
| 1 | 10,000 | 1,000 | 20 | 5.567 | 8.152 |
| 1 | 10,000 | 1,000 | 30 | 7.183 | 10.273 |
| 2 | 50,000 | 5,000 | 1 | 7.312 | 11.153 |
| 2 | 50,000 | 5,000 | 10 | 15.083 | 26.740 |
| 2 | 50,000 | 5,000 | 20 | 24.380 | 43.757 |
| 2 | 50,000 | 5,000 | 30 | 30.632 | 57.541 |
| 3 | 100,000 | 10,000 | 1 | 16.054 | 30.347 |
| 3 | 100,000 | 10,000 | 10 | 33.898 | 59.902 |
| 3 | 100,000 | 10,000 | 20 | 52.611 | 96.612 |
| 3 | 100,000 | 10,000 | 30 | 70.390 | 117.375 |

- 「昇順配列挿入」は Turn 11 で導入した挿入ソート方式の結果です（再計測は行っていません）。
- 最大ヒープ方式の値は、上記 commit 時点の最新実装を SYCL CPU モードで再計測した結果です。
