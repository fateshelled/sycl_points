# Octree KNN ベンチマーク比較

以下の結果は、Octree の近傍候補管理を最大ヒープ方式で実装した現行コードと、KDTree 実装を比較したものです。ベンチマークテスト `OctreeTest.BenchmarkOctreeAgainstKDTree` をウォームアップののち100回平均で計測し、点群構成は commit `26a038a` 時点のテスト実装に従います。

### 構築時間 (ms)

| ケース | ターゲット点数 | クエリ点数 | k | Octree (最大ヒープ) | KDTree |
| --- | --- | --- | --- | --- | --- |
| 1 | 10,000 | 1,000 | 1 | 1.600 | 4.166 |
| 1 | 10,000 | 1,000 | 10 | 2.289 | 4.363 |
| 1 | 10,000 | 1,000 | 20 | 1.895 | 4.208 |
| 1 | 10,000 | 1,000 | 30 | 2.068 | 4.254 |
| 2 | 50,000 | 5,000 | 1 | 9.773 | 23.419 |
| 2 | 50,000 | 5,000 | 10 | 9.852 | 23.911 |
| 2 | 50,000 | 5,000 | 20 | 10.260 | 24.209 |
| 2 | 50,000 | 5,000 | 30 | 11.087 | 23.742 |
| 3 | 100,000 | 10,000 | 1 | 18.452 | 49.083 |
| 3 | 100,000 | 10,000 | 10 | 20.109 | 50.220 |
| 3 | 100,000 | 10,000 | 20 | 18.537 | 49.509 |
| 3 | 100,000 | 10,000 | 30 | 20.094 | 48.593 |

### 探索時間 (ms)

| ケース | ターゲット点数 | クエリ点数 | k | Octree (最大ヒープ) | KDTree |
| --- | --- | --- | --- | --- | --- |
| 1 | 10,000 | 1,000 | 1 | 2.629 | 0.973 |
| 1 | 10,000 | 1,000 | 10 | 4.398 | 2.355 |
| 1 | 10,000 | 1,000 | 20 | 7.190 | 3.654 |
| 1 | 10,000 | 1,000 | 30 | 9.538 | 4.989 |
| 2 | 50,000 | 5,000 | 1 | 8.767 | 4.315 |
| 2 | 50,000 | 5,000 | 10 | 20.718 | 11.111 |
| 2 | 50,000 | 5,000 | 20 | 34.817 | 16.295 |
| 2 | 50,000 | 5,000 | 30 | 40.671 | 21.103 |
| 3 | 100,000 | 10,000 | 1 | 20.324 | 8.201 |
| 3 | 100,000 | 10,000 | 10 | 48.359 | 21.240 |
| 3 | 100,000 | 10,000 | 20 | 70.851 | 32.092 |
| 3 | 100,000 | 10,000 | 30 | 95.455 | 41.969 |

